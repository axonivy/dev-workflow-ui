<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions">

  <p:dataTable id="tasks" var="task" value="#{casesDetailsBean.selectedCase.activeTasks}" widgetVar="tasksTable"
    emptyMessage="No Tasks found with given criteria" style="margin-top:10px" lazy="true" paginatorPosition="bottom"
    rows="10" rowsPerPageTemplate="10,20,50" paginator="true" paginatorAlwaysVisible="false"
    paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}">

    <p:column filterBy="#{task.state}" styleClass="icon-row">
      <h:outputText id="taskState" styleClass="si si-lg si-#{tasksBean.getStateIcon(task.state)}" />
      <p:tooltip for="taskState" value="State: #{task.state}" position="top" />
    </p:column>

    <p:column id="priority" filterBy="#{task.priority}" styleClass="icon-row">
      <h:outputText id="taskPrio" styleClass="si si-lg si-#{tasksBean.getPriorityIcon(task.priority)}" />
      <p:tooltip for="taskPrio" value="Priority: #{task.priority}" position="top" />
    </p:column>

    <p:column headerText="Name" filterBy="#{task.name}">
      <h:outputText id="taskName" value="#{tasksDetailsBean.getName(task)}" style="color:#212121" />
      <p:tooltip for="taskName" value="Task ID: #{task.id}" position="top" />
    </p:column>

    <p:column headerText="Start Date" style="text-align: center;">
      <h:outputText id="startTime" value="#{dateTimeBean.getPrettyTime(task.startTimestamp)}" />
      <p:tooltip for="startTime" value="#{dateTimeBean.getDateTime(task.startTimestamp)}" position="top" />
    </p:column>

    <p:column headerText="Expiry" style="text-align: center;">
      <h:outputText id="expiryTime" value="#{dateTimeBean.getDateTime(task.expiryTimestamp)}" />
    </p:column>

    <p:column style="width: 60px; text-align: center;">
      <h:link outcome="taskDetails">
        <f:param name="task" value="#{task.id}" />
        <i class="si si-lg si-information-circle"></i>
      </h:link>
    </p:column>
  </p:dataTable>

</ui:composition>
