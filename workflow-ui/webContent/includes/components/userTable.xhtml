<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions">
  <h:form id="loginTable" style="margin-top: 20px">
    <h:outputText value="Login Table" style="font-size:16pt; font-weight:bold" />
    <br />
    <h:outputText value="Click user to login" />
    <p:dataTable id="users" var="user" value="#{loginBean.getUsers()}" widgetVar="usersTable"
      emptyMessage="No users found with given criteria" style="margin-top:10px" selectionMode="single"
      rowKey="#{user.getFullName()}">
      <p:ajax event="rowSelect" listener="#{loginBean.login}" update="@form" />

      <f:facet name="header">
        <p:outputPanel>
          <h:outputText value="Search:" />
          <p:inputText id="globalFilter" onkeyup="PF('usersTable').filter()" style="width:150px"
            placeholder="Enter keyword" />
        </p:outputPanel>
      </f:facet>

      <p:column headerText="Username" filterBy="#{user.getName()}" filterStyle="display: none">
        <h:outputText value="#{user.getName()}" >
        <i class="material-icons table-icon">person</i>
        </h:outputText>
      </p:column>

      <p:column headerText="Fullname" filterBy="#{user.getFullName()}" filterStyle="display: none">
        <h:outputText value="#{user.getFullName()}" />
      </p:column>

      <p:column headerText="Roles" filterBy="#{loginBean.getRoles(user)}" filterStyle="display: none" colspan="2">
        <h:outputText value="#{loginBean.getRoles(user)}" />
      </p:column>

      <p:column width="64">
        <i class="material-icons">login</i>
      </p:column>

    </p:dataTable>
  </h:form>
</ui:composition>
