<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions">
  <h:form id="loginTable">
    <h:panelGroup styleClass="card card-w-title custom-card"
      layout="block">
      <h:outputText value="Login Table" styleClass="card-header-title" /><br/>
      <h:outputText value="Click user to login" />
      <p:dataTable id="users" var="user" value="#{loginTableIvyDevWfBean.users}" widgetVar="usersTable"
        emptyMessage="No users found with given criteria" style="margin-top:10px" selection="#{loginTableIvyDevWfBean.currentUser}"
        selectionMode="single" rowKey="#{user.fullname}" sortBy="#{user.name}">
        <p:ajax event="rowSelect" listener="#{loginIvyDevWfBean.loginFromTable}" update="@form" />

        <f:facet name="header">
          <p:outputPanel>
            <h:outputText value="Search:" />
            <p:inputText id="globalFilter" onkeyup="PF('usersTable').filter()"
              placeholder="Enter keyword" />
          </p:outputPanel>
        </f:facet>

        <p:column headerText="Username" filterBy="#{user.name}" sortBy="#{user.name}">
          <h:outputText value="#{user.name}">
            <i class="si si-single-neutral-actions table-icon"></i>
          </h:outputText>
        </p:column>

        <p:column headerText="Fullname" filterBy="#{user.fullname}" sortBy="#{user.fullname}">
          <h:outputText value="#{user.fullname}" />
        </p:column>

        <p:column headerText="Roles" filterBy="#{user.roles}" sortBy="#{user.roles}"
         filterStyle="display: none" colspan="2">
          <h:outputText value="#{user.roles}" />
        </p:column>

        <p:column width="64">
          <i class="si si-lg si-login-3"></i>
        </p:column>

      </p:dataTable>
    </h:panelGroup>
  </h:form>
</ui:composition>
