<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions">
  <p:dialog header="Workflow Events of task ##{param['task']}" widgetVar="workflowDialog" modal="true" resizable="false" style="max-width:1200px">
    <p:dataTable id="events" var="event" value="#{tasksDetailsBean.selectedTask.getWorkflowEvents()}" widgetVar="eventsTable"
      emptyMessage="No Events found with given criteria" reflow="true">

      <p:column headerText="Creation Date" sortBy="#{event.getEventTimestamp()}">
        <h:outputText value="#{tasksDetailsBean.getDateTime(event.getEventTimestamp())}"/>
      </p:column>

      <p:column headerText="Event type" colspan="2">
        <h:outputText value="#{event.getEventKind()}" id="eventType"/>
      </p:column>

      <p:column headerText="State" sortBy="#{event.getTaskState()}">
        <h:outputText value="#{event.getTaskState()}" id="eventState"/>
      </p:column>

      <p:column headerText="Author" sortBy="#{event.getUserName()}">
        <h:outputText value="#{event.getUserName()}" id="eventAuthor"/>
      </p:column>

      <p:column headerText="Content">
        <h:outputText value="#{tasksDetailsBean.getWorkflowInfo(event)}" id="eventInfo"/>
      </p:column>
    </p:dataTable>
  </p:dialog>
</ui:composition>
