<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
  xmlns:jc="http://java.sun.com/jsf/composite/components">

  <p:dataTable id="fired-signals-table" var="signal" value="#{signalsBean.firedSignals}" styleClass="margin-top-10"
    rows="10" paginator="true" paginatorAlwaysVisible="false"
    paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
    currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records" paginatorPosition="bottom"
    rowsPerPageTemplate="5,10,{ShowAll|'All'}">
    <p:column headerText="Code">
      <h:outputText value="#{signal.signalCode}" />
    </p:column>
    <p:column headerText="Date">
      <h:outputText id="timestamp" value="#{dateTimeBean.getPrettyTime(signal.sentTimestamp)}" />
      <p:tooltip for="timestamp" value="#{dateTimeBean.getDateTime(signal.sentTimestamp)}" position="top" />
    </p:column>
    <p:column headerText="Sent by">
      <i class="si si-single-neutral-circle table-icon" />
      <h:outputText value="#{signal.sentByUserName}" />
    </p:column>
    <p:column headerText="Destoryed tasks">
      <p:repeat var="task" value="#{signal.destroyedTasks}" varStatus="status">
        <h:link outcome="taskDetails">
          <f:param name="task" value="#{task.id}" />
          <h:outputText value="#{task}#{status.last ? '' : ', '}" />
        </h:link>
      </p:repeat>
    </p:column>
    <p:column headerText="Created cases" colspan="2">
      <p:repeat var="task" value="#{signal.createdTasks}" varStatus="status">
        <jc:caseLink case="#{task.case}" />
      </p:repeat>
    </p:column>
  </p:dataTable>

</ui:composition>
