<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:ic="http://ivyteam.ch/jsf/component" xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions">

<h:body>
  <ui:composition template="../includes/template/template.xhtml">
    <ui:define name="content">
      <h:form id="startsForm">
      <h:panelGroup styleClass="card card-w-title task-detail-container case-details-item" layout="block">
        <h:outputText value="Starts" styleClass="starts-header-title" />
        <p:panel id="main-starts-container" styleClass="main-starts-container">
          <f:facet name="header">
            <p:outputPanel>
              <p:inputText id="filter" placeholder="Search project or start" value="#{processesBean.filter}">
                <p:ajax event="keyup" update="projectStarts" />
              </p:inputText>
            </p:outputPanel>
          </f:facet>
          <p:accordionPanel var="pmv" value="#{processesBean.PMVs}" id="projectStarts" activeIndex="0" multiple="true">
            <p:tab titleStyleClass="straight-text-icon">
              <f:facet name="title">
                <i class="si si-#{pmv.stateIcon}" title="#{pmv.state} - #{pmv.versionName}"></i>
                <h:outputText styleClass="starts-project-name" value="#{pmv.projectName}"/>
              </f:facet>
              <ui:repeat var="start" value="#{pmv.startElements}">
                <p:panel styleClass="start-element" rendered="#{pmv.active}">
                  <h:commandLink action="#{processesBean.executeStart(start.link.relative)}" id="start-link" class="flex-space">
                    <span class="straight-text-icon">
                      <i class="si si-controls-play" style="padding-right: 8px"></i>
                      <span>#{start.getDisplayName()}</span>
                    </span>
                    <span>#{start.getDescription()}</span>
                  </h:commandLink>
                </p:panel>
              </ui:repeat>
            </p:tab>
          </p:accordionPanel>
        </p:panel>
      </h:panelGroup>
      </h:form>
    </ui:define>
  </ui:composition>
</h:body>
</html>
