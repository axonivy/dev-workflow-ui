<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions">

  <div class="flex justify-content-center height-100">
    <h:panelGroup layout="block" styleClass="case-map-container" rendered="#{not empty casesDetailsBean.getCaseMap().stages}">
      <ui:repeat var="stage" value="#{casesDetailsBean.getCaseMap().stages}" varStatus="count">
        <h:panelGroup styleClass="case-map-column">
          <div class="case-map-icon-container">
            <i class="case-map-icon #{stage.iconCss} #{stage.stateCss}" />
            <h:panelGroup class="stage-icon-container" rendered="#{stage.executed}">
              <span class="dot">
                <i class="si #{stage.stateIconCss} case-map-state-icon"/>
              </span>
            </h:panelGroup>
          </div>
          <h:outputText value="#{stage.name}"/>
        </h:panelGroup>
        <h:panelGroup class="process-flow" rendered="#{!stage.last}">
          <span class="flow-txt">
            <hr/>
          </span>
        </h:panelGroup>
      </ui:repeat>
    </h:panelGroup>
    <c:if test="#{empty casesDetailsBean.getCaseMap().stages}">
      <i class="si si-road-sign-warning mr-1"/>
      <h:outputText value="No Case Map found." />
    </c:if>
  </div>

</ui:composition>
