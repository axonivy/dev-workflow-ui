<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions">
  <h:form id="loginTable">
    <div class="card ui-fluid">
      <div class="flex align-items-center mb-3">
        <i class="pr-3 si si-login-3 card-title-icon"></i>
        <h2 class="m-0">Login</h2>
      </div>
      <p>Click user to login</p>
      <p:dataTable id="users" var="user" value="#{loginTableIvyDevWfBean.users}" widgetVar="usersTable"
        emptyMessage="No users found with given criteria" selection="#{loginTableIvyDevWfBean.currentUser}"
        selectionMode="single" rowKey="#{user.fullname}">
        <p:ajax event="rowSelect" listener="#{loginIvyDevWfBean.loginFromTable}" />
        <f:facet name="header">
          <div class="ui-input-icon-left filter-container">
            <i class="pi pi-search"/>
            <p:inputText id="globalFilter" value="#{loginTableIvyDevWfBean.globalFilter}"  onkeyup="PF('usersTable').filter()" placeholder="Search" />
          </div>
        </f:facet>

        <p:column headerText="Username" filterBy="#{user.name}" sortBy="#{user.name}" sortOrder="ascending">
          <h:outputText value="#{user.name}">
            <i class="si si-single-neutral-actions mr-1"></i>
          </h:outputText>
        </p:column>

        <p:column headerText="Fullname" filterBy="#{user.fullname}" sortBy="#{user.fullname}">
          <h:outputText value="#{user.fullname}" />
        </p:column>

        <p:column headerText="Roles" filterBy="#{user.roles}" sortBy="#{user.roles}"
         filterStyle="display: none" colspan="2">
          <h:outputText value="#{user.roles}" />
        </p:column>
      </p:dataTable>
    </div>
  </h:form>
</ui:composition>
