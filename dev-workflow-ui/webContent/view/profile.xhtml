<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions">

<h:body>
  <ui:composition template="../includes/template/template.xhtml">
    <ui:define name="content">
      <f:event type="preRenderView"
        listener="#{loginIvyDevWfBean.redirectIfNotLoggedIn}" />

      <div class="card ui-fluid">
        <div class="p-d-flex p-ai-center p-mb-3">
          <i class="p-pr-3 si si-single-neutral-circle card-title-icon"></i>
          <h2 class="p-m-0">Profile</h2>
        </div>
        <h:form id="profileForm">
          <p:growl id="growl" showDetail="true" />
          <p:panelGrid columns="2" layout="flex" columnClasses="p-col-3,p-col-9">
            <h:outputLabel for="userName">User Name</h:outputLabel>
            <h:outputText id="userName" value="#{profileBean.userName}"></h:outputText>

            <h:outputLabel for="fullName">Full name</h:outputLabel>
            <p:inputText id="fullName" value="#{profileBean.fullName}"></p:inputText>

            <h:outputLabel for="email">Email</h:outputLabel>
            <p:inputText id="email" value="#{profileBean.email}"></p:inputText>

            <h:outputLabel for="contentLanguage" >Language</h:outputLabel>
            <h:panelGroup>
              <p:selectOneMenu id="contentLanguage"
                value="#{profileBean.contentLanguage}"
                editable="true"
                converter="localeConverter">
                <f:selectItems value="#{profileBean.contentLanguages}"
                  var="locale" itemLabel="#{profileBean.toDisplayName(locale)}" />
              </p:selectOneMenu>
              <small>
              <h:outputText title="Content locale of the current session."
                escape="false"
                value="#{profileBean.contentLanguageSource}"></h:outputText>
               </small>
            </h:panelGroup>

            <h:outputLabel for="formattingLanguage">Formatting Language</h:outputLabel>
            <h:panelGroup>
              <p:selectOneMenu filter="true" filterMatchMode="contains"
                id="formattingLanguage"
                editable="true"
                value="#{profileBean.formattingLanguage}"
                converter="localeConverter">
                <f:selectItems value="#{profileBean.formattingLanguages}"
                  var="locale" itemLabel="#{profileBean.toDisplayName(locale)}" />
              </p:selectOneMenu>
              <small>
              <h:outputText title="Formatting locale of the current session."
                escape="false"
                value="#{profileBean.formattingLanguageSource}"></h:outputText>
              </small>
            </h:panelGroup>

            <h:outputLabel for="roles">Roles</h:outputLabel>
            <h:outputText id="roles" value="#{profileBean.roles}"></h:outputText>
          </p:panelGrid>
          <p:commandButton id="saveBtn" value="Save"
            icon="si si-floppy-disk"
            style="max-width:200px;margin-top:20px;"
            actionListener="#{profileBean.save}" update="@form" />
        </h:form>
      </div>
    </ui:define>
  </ui:composition>
</h:body>
</html>
