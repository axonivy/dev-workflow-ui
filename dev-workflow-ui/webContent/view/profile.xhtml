<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:ic="http://ivyteam.ch/jsf/component"
  xmlns:p="http://primefaces.org/ui"
  xmlns:pe="http://primefaces.org/ui/extensions">

<h:body>
  <ui:composition template="../includes/template/template.xhtml">
    <ui:define name="content">
      <f:event type="preRenderView"
        listener="#{loginIvyDevWfBean.redirectIfNotLoggedIn}" />

      <div class="card ui-fluid">
        <div class="p-d-flex p-ai-center p-mb-3">
          <i class="p-pr-3 si si-single-neutral-circle card-title-icon"></i>
          <h2 class="p-m-0">Profile</h2>
        </div>
        <h:form id="profileForm">
          <p:growl id="growl" showDetail="true" />
          <p:panelGrid columns="2" layout="flex" columnClasses="p-col-12 p-md-3, p-col-12 p-md-9">
            <h:outputLabel for="userName" styleClass="details-description-label">User Name</h:outputLabel>
            <h:outputText id="userName" value="#{profileBean.userName}"></h:outputText>

            <h:outputLabel for="fullName" styleClass="details-description-label">Full name</h:outputLabel>
            <p:inputText id="fullName" value="#{profileBean.fullName}"></p:inputText>

            <h:outputLabel for="email" styleClass="details-description-label">Email</h:outputLabel>
            <p:inputText id="email" value="#{profileBean.email}"></p:inputText>

            <h:outputLabel for="contentLanguage" styleClass="details-description-label">Language</h:outputLabel>
            <h:panelGroup>
              <p:selectOneMenu id="contentLanguage" value="#{profileBean.contentLanguage}" editable="true"
                converter="localeConverter">
                <f:selectItems value="#{profileBean.contentLanguages}" var="locale"
                  itemLabel="#{profileBean.toDisplayName(locale)}" />
              </p:selectOneMenu>
              <small>
                <h:outputText id="contentLanguageDisplay" value="#{profileBean.contentLanguageSource}" escape="false"/>
                <p:tooltip for="contentLanguageDisplay" value="Content locale of the current session." position="bottom"/>
              </small>
            </h:panelGroup>

            <h:outputLabel for="formattingLanguage" styleClass="details-description-label">Formatting Language</h:outputLabel>
            <h:panelGroup>
              <p:selectOneMenu filter="true" filterMatchMode="contains" id="formattingLanguage" editable="true"
                value="#{profileBean.formattingLanguage}" converter="localeConverter">
                <f:selectItems value="#{profileBean.formattingLanguages}" var="locale"
                  itemLabel="#{profileBean.toDisplayName(locale)}" />
              </p:selectOneMenu>
              <small>
                <h:outputText id="formattingLanguageDisplay" value="#{profileBean.formattingLanguageSource}" escape="false" />
                <p:tooltip for="formattingLanguageDisplay" value="Formatting locale of the current session." position="bottom"/>
              </small>
            </h:panelGroup>

            <h:outputLabel for="roles" styleClass="details-description-label">Roles</h:outputLabel>
            <h:outputText id="roles" value="#{profileBean.roles}"></h:outputText>
          </p:panelGrid>
          <p:commandButton id="saveBtn" value="Save"
            icon="si si-floppy-disk"
            style="max-width:200px;margin-top:20px;"
            actionListener="#{profileBean.save}" update="@form" />
        </h:form>
      </div>
    </ui:define>
  </ui:composition>
</h:body>
</html>
